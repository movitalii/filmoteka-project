{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAe,SAAAC,GAAgBC,YAACA,EAAWC,KAAEA,EAAIC,MAAEA,EAAKC,UAAEA,EAASC,aAAEA,EAAYC,aAAEA,EAAYC,eAAEA,IAE7F,MAAO,wEACkBN,yFACDC,GAAMC,oEAEJC,wCAEtBC,EAAeA,EAAaG,MAAM,EAAG,GAAKD,EAAeC,MAAM,EAAG,kC,kBCH1E,MAAMC,EAAa,IFJJ,MAOXC,oBACI,MAAMC,EAAU,CAChBC,IAAK,oCAIL,IAAKA,IAACA,GAAOD,EAEZ,MAAME,QAAkBf,EAAAgB,QAAMC,IAAI,yDAAuBH,qBAClDI,OAACA,GAAUH,EAASI,KAKxB,OAJAC,QAAQC,IAAI,KAAM,CAAC,C,OAACH,IAASI,IAC7BC,KAAKC,MAAQ,EAGN,C,OAACN,E,CAGfN,mBACG,MAAMC,EAAU,CAChBC,IAAK,oCAIL,IAAKA,IAACA,GAAOD,EAEZ,MACOM,SADiBnB,EAAAgB,QAAMC,IAAI,yDAAuBH,MAClCK,KAIpB,OAFAI,KAAKC,MAAQ,EACpBJ,QAAQC,IAAIF,EAAKM,SACHN,C,CAKdO,YACGH,KAAKC,KAAO,C,CAGZG,kBACA,OAAOJ,KAAKK,M,CAEZD,gBAAYE,GACZN,KAAKK,OAASC,C,CAjDlBC,cACIP,KAAKK,OAAS,GACdL,KAAKC,KAAO,EACZD,KAAKD,GAAK,I,GEGlBX,EAAWoB,cAAcC,MAAKb,IAC5B,MAAMc,EAASd,EAAKD,OACpBgB,aAAaC,QAJM,aAIcC,KAAKC,UAAUJ,GAAQ,IAI1DtB,EAAW2B,aAAaN,MAAKb,KAC3B,EAAAoB,EAAAC,UAASrB,EAAKK,KAAML,EAAKM,SAO3B,SAAyBN,GAEvBC,QAAQC,IAAIF,EAAKM,SACjB,MAAMgB,EAAOtB,EAAKM,QAAQiB,KAAIC,IAC5B,IAAIC,EAAY,GA0BhB,OAzBAD,EAAOrC,UAAUuC,SAAQC,IAEvBC,EAAOF,SAAQG,IAETF,IAAYE,EAAO1B,IACrBsB,EAAUK,KAAK,IAAID,EAAO5C,OAAO,GAGnC,IAGAwC,EAAUM,OAAS,IACrBN,EAAYA,EAAUlC,MAAM,EAAG,GAC/BkC,EAAUK,KAAK,cAGQ,IAArBL,EAAUM,QAEZN,EAAUK,KAAK,aAEjBN,EAAOrC,UAAYsC,EAEnBxB,QAAQC,IAAI,SAAU8B,OAAOC,OAAOT,EAAOrC,YAGpCqC,CAAM,IACXD,KAAIC,GAAUzC,EAAOyC,KAASU,KAAK,IACrCjC,QAAQC,IAAI,OAAQoB,GACtBa,SAASC,cAAc,YAAYC,mBAAmB,YAAaf,E,CAvCnEgB,CAAgBtC,EAAK,IAEvB,MAAMuC,EAAYxB,aAAayB,QAZV,cAcbZ,EAASX,KAAKwB,MAAMF","sources":["src/js/api-service.js","src/js/card.js","src/js/fetchImages.js"],"sourcesContent":["import axios from \"axios\";\nexport default class ApiService {\n    constructor (){\n        this.images = '';\n        this.page = 1;\n        this.id = null;\n    }   \n\n    async fetchGenres() {\n        const options = {\n        key: `3ff086ca8fded08ba42938358b3327b4`,      \n       \n        };\n        const BASE_URL = `https://api.themoviedb.org/3/genre/movie/list`\n        let  {key} = options;\n       \n         const response  = await axios.get(`${BASE_URL}?api_key=${key}&language=en-US`)\n          const {genres} = response.data;          \n            console.log('id', [{genres}].id)\n            this.page += 1;        \n            // genre_ids\n            // console.log(genres)\n            return {genres};\n         };    \n\n     async fetchImage() {\n        const options = {\n        key: `3ff086ca8fded08ba42938358b3327b4`,      \n       \n        };\n        const BASE_URL = `https://api.themoviedb.org/3/trending/all/day`\n        let  {key} = options;\n       \n         const response  = await axios.get(`${BASE_URL}?api_key=${key}`)\n          const data = response.data;          \n         \n            this.page += 1;        \n     console.log(data.results)\n            return data;\n         }; \n         \n         \n   \n     clearForm() {\n        this.page = 1;\n    }\n\n    get searchQuery() {\n        return this.images;\n    }\n    set searchQuery(newSearchQuery){\n        this.images = newSearchQuery;\n    }\n    \n};","export default function onCard({poster_path, name, title, genre_ids, release_date, vote_average, first_air_date}) {\n    const BASE_IMAGE = `https://image.tmdb.org/t/p/original`\n    return `<div class=\"card\">\n    <img src=\"${BASE_IMAGE}${poster_path}\" alt=\"A FISTFUL OF LEAD\" class=\"card_image\" width=\"300\">\n    <h2 class=\"card_name\">${name||title}</h2>\n    <div class=\"card_text\">\n      <p class=\"card_title\">${genre_ids}</p>\n      <p class=\"card_year\"> | ${\n        release_date ? release_date.slice(0, 4) : first_air_date.slice(0, 4)\n      }</p>      \n    </div>\n</div>`    \n}\n\n/* <p class=\"card_rating\">  ${ vote_average.toFixed(1)}</p> */\n","import ApiService from './api-service';\nimport onCard from './card';\n// Ed import//\nimport { saveInfo, getInfo, removeInfo } from './storage_api';\n/////////////\nconst apiService = new ApiService();\nconst GENRE_NAME   = 'genre_card';\n\napiService.fetchGenres().then(data => {\n  const genres = data.genres\n  localStorage.setItem(GENRE_NAME, JSON.stringify(genres))\n//  console.log('ok', data.genres);\n});\n\napiService.fetchImage().then(data => {\n  saveInfo(data.page, data.results); // добавил сохранение в локалсторедж при обращении к АПИ////////\n  addArticleImage(data);\n});\nconst genreName = localStorage.getItem(GENRE_NAME);\n  // console.log('genre', genreName)\n  const genres = JSON.parse(genreName);  \n\nfunction addArticleImage(data) {\n  \n  console.log(data.results);\n  const cart = data.results.map(result => {\n    let genresArr = [];\n    result.genre_ids.forEach(genreID => {\n      // console.log(genreID)\n      genres.forEach(genOBJ => {\n        // console.log(genOBJ)\n        if (genreID === genOBJ.id) {\n          genresArr.push(` ${genOBJ.name}`);\n          // console.log(genresArr)\n        }\n      });\n    });\n    \n    if (genresArr.length > 3) {\n      genresArr = genresArr.slice(0, 2);\n      genresArr.push(' Other...');\n           \n    } \n    if (genresArr.length === 0) {\n      \n      genresArr.push('No genres');\n    }\n    result.genre_ids = genresArr;\n    // console.log(result)\n    console.log('odject', Object.values(result.genre_ids)) \n    \n    \n    return result;\n  } ).map(result => onCard(result)).join('');\n    console.log('cart', cart)\n  document.querySelector(`.gallery`).insertAdjacentHTML('beforeend', cart);\n}\n"],"names":["$2shzp","parcelRequire","$7444c4569451fc47$export$2e2bcd8739ae039","poster_path","name","title","genre_ids","release_date","vote_average","first_air_date","slice","$78401bf63fbcf63c$var$apiService","async","options","key","response","default","get","genres","data","console","log","id","this","page","results","clearForm","searchQuery","images","newSearchQuery","constructor","fetchGenres","then","genres1","localStorage","setItem","JSON","stringify","fetchImage","$e5H4a","saveInfo","cart","map","result","genresArr","forEach","genreID","$78401bf63fbcf63c$var$genres","genOBJ","push","length","Object","values","join","document","querySelector","insertAdjacentHTML","$78401bf63fbcf63c$var$addArticleImage","$78401bf63fbcf63c$var$genreName","getItem","parse"],"version":3,"file":"index.3c2e4f47.js.map"}